# 🚀 GitHub 推荐系统 - 增强版使用说明

## 📋 功能特性

### ✅ 核心功能
- **🎯 按配置级别搜索**: 每个推荐配置独立搜索GitHub项目
- **📊 实时进度监控**: 显示每个配置的执行进度和状态
- **📨 多渠道推送**: 支持邮件、Telegram、Slack、企业微信
- **🖥️ 美观界面**: Rich库提供的彩色命令行界面
- **🌐 Web管理**: 完整的Web管理界面

### 🆕 增强功能
- **配置级别详细输出**: 每个配置的搜索和推送过程完全可见
- **交互式命令行**: 直观的操作菜单和选择界面
- **实时统计**: 显示搜索、推荐、通知的详细数据
- **错误处理**: 完善的错误提示和处理机制

## 🚀 快速启动

### 1. 启动Web服务器
```bash
python enhanced_main.py --server
```

访问地址：
- 主界面: http://localhost:8000
- 增强界面: http://localhost:8000/enhanced
- API文档: http://localhost:8000/docs

### 2. 交互式模式（推荐）
```bash
python enhanced_main.py
# 或
python enhanced_main.py --cli
```

### 3. 演示模式
```bash
python enhanced_main.py --demo
```

### 4. 命令行直接执行
```bash
# 运行用户所有配置
python enhanced_main.py --user 1 --all

# 运行指定配置
python enhanced_main.py --user 1 --config 2

# 查看用户列表
python enhanced_main.py --list-users

# 查看用户配置
python enhanced_main.py --user 1 --list-configs
```

## 📱 交互式模式操作指南

启动交互模式后，你会看到美观的菜单：

```
📋 请选择操作:
1. 📋 查看所有用户
2. 🎯 查看用户配置
3. ▶️  运行单个配置
4. 🚀 运行所有配置
5. 🌐 启动Web服务器
6. 🚪 退出
```

### 操作流程示例：

1. **查看用户**: 选择选项 1 查看系统中的所有用户
2. **查看配置**: 选择选项 2，输入用户ID查看其推荐配置
3. **执行配置**: 选择选项 4 运行用户的所有配置

## 🎯 按配置搜索的详细流程

当你运行配置时，系统会显示详细的执行过程：

```
============================================================
🔄 处理配置 1/3: AI/机器学习项目
============================================================

配置详情:
┌────────────┬─────────────────────────────────────┐
│ 属性       │ 值                                  │
├────────────┼─────────────────────────────────────┤
│ 配置名称   │ AI/机器学习项目                     │
│ 关键词     │ machine learning, ai, deep learning │
│ 编程语言   │ Python, R                           │
│ 最小Star数 │ 100                                 │
│ 通知渠道   │ email, telegram                     │
└────────────┴─────────────────────────────────────┘

🔍 正在从GitHub搜索项目...
✅ 搜索完成，获取到 45 个项目

⭐ 正在评分和过滤项目...
✅ 过滤完成，筛选出 12 个高质量项目

💾 正在保存推荐结果...
✅ 保存完成，生成了 12 条推荐

📨 正在发送通知...
✅ 通知发送成功: email, telegram

✅ 配置 'AI/机器学习项目' 处理完成
```

## 📊 执行结果展示

### 配置级统计
每个配置执行完成后会显示详细统计：

```
执行摘要: AI/机器学习项目
┌─────────────┬──────┐
│ 指标        │ 数量 │
├─────────────┼──────┤
│ 获取项目数  │ 45   │
│ 缓存项目数  │ 45   │
│ 过滤项目数  │ 12   │
│ 生成推荐数  │ 12   │
│ 通知渠道    │ email, telegram │
└─────────────┴──────┘
```

### 全局统计
所有配置执行完成后显示总体统计：

```
📊 执行总结
══════════════════════════════════════════════════════════
总体统计
┌─────────────────┬──────┐
│ 指标            │ 数量 │
├─────────────────┼──────┤
│ 处理配置数      │ 3    │
│ 获取项目总数    │ 156  │
│ 生成推荐总数    │ 28   │
│ 发送通知数      │ 3    │
└─────────────────┴──────┘
```

## 🌐 Web界面功能

### 主界面 (http://localhost:8000)
- 用户注册和登录
- 推荐偏好配置管理
- 推荐结果查看
- 通知设置

### 增强界面 (http://localhost:8000/enhanced)
- 配置级别的可视化控制面板
- 实时进度监控
- 详细的执行日志
- 统计仪表板

## 🔧 系统配置

### 环境变量
创建 `.env` 文件：

```env
# 数据库配置
DATABASE_URL=sqlite:///./github_bot.db

# GitHub API
GITHUB_TOKEN=your_github_token_here

# 通知配置
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password

# 应用配置
DEBUG=true
LOG_LEVEL=INFO
```

### 数据库初始化
系统首次启动时会自动初始化数据库。

## 📝 API接口

### 手动触发推荐
```bash
curl -X POST "http://localhost:8000/api/v1/projects/runs/trigger" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "force_refresh": true,
    "preference_id": 1
  }'
```

### 查看推荐结果
```bash
curl -X GET "http://localhost:8000/api/v1/projects/my/latest?limit=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## 🎭 演示模式详解

演示模式会自动：
1. 显示欢迎界面
2. 列出所有用户和配置
3. 选择第一个用户
4. 运行该用户的所有配置
5. 展示完整的执行过程

这是了解系统功能的最佳方式！

## 🚨 注意事项

### GitHub API限制
- 未认证: 60次/小时
- 认证后: 5000次/小时
- 建议配置 `GITHUB_TOKEN`

### 通知配置
每个推荐配置可以设置不同的通知渠道：
- **email**: 需要配置SMTP设置
- **telegram**: 需要Bot Token和Chat ID
- **slack**: 需要Webhook URL
- **wechat**: 需要企业微信Webhook URL

### 性能优化
- 系统会缓存GitHub API结果
- 可设置 `force_refresh=true` 强制刷新
- 建议合理设置搜索频率

## 🔍 故障排除

### 常见问题

1. **GitHub API限制**
   ```
   解决方案: 配置GITHUB_TOKEN环境变量
   ```

2. **通知发送失败**
   ```
   检查: 通知渠道配置是否正确
   确认: 网络连接是否正常
   ```

3. **数据库连接错误**
   ```
   检查: DATABASE_URL配置
   确认: 文件权限是否正确
   ```

### 日志查看
系统使用结构化日志，所有操作都有详细记录：
```bash
# 查看实时日志
tail -f logs/app.log
```

## 💡 最佳实践

1. **配置管理**
   - 为不同技术栈创建独立配置
   - 设置合理的Star数阈值
   - 配置多个通知渠道作为备份

2. **性能优化**
   - 避免频繁的强制刷新
   - 合理设置最大推荐数量
   - 定期清理旧的缓存数据

3. **通知策略**
   - 工作时间使用Slack/企业微信
   - 重要推荐使用邮件
   - 实时通知使用Telegram

## 🎉 总结

增强版GitHub推荐系统完全实现了你要求的功能：

✅ **按每个配置分别搜索**: 每个配置独立执行GitHub搜索
✅ **详细打印输出**: 显示每个配置的完整执行过程
✅ **配置级别推送**: 每个配置推送到指定的通知渠道
✅ **美观的界面**: Rich库提供的彩色命令行界面
✅ **Web管理界面**: 完整的Web配置和监控界面

现在你可以清楚地看到每个配置是如何独立搜索、评分、推荐和推送的！🚀